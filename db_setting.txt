DROP DATABASE center;
CREATE DATABASE center;
drop database user1;
drop database user2;
create database user1;
create database user2;
USE center;

create table USER(
	userID varchar(200) primary key,
	userPW varchar(200) not null
);

create view VIEW_USER as select userID from USER;

create table LOG(
	f_name varchar(200) primary key,
	real_name varchar(200) not null,
	location varchar(200) not null,
	last_update_time varchar(20) not null,
	last_read_line int not null default -1
);

create view VIEW_LOG as select f_name from LOG;

insert into center.USER(userID, userPW) values("user1", "Admin1!");
insert into center.USER(userID, userPW) values("user2", "Admin2!");

GRANT create, select, insert, update, delete, drop, grant option ON user1.* TO user1@localhost;
GRANT create, select, insert, update, delete, drop, grant option ON user2.* TO user2@localhost;
GRANT select ON center.VIEW_LOG TO user1@localhost;
GRANT select ON center.VIEW_LOG TO user2@localhost;
GRANT select ON center.VIEW_USER TO user1@localhost;
GRANT select ON center.VIEW_USER TO user2@localhost;

use user1;
create table BlockChain(
	f_name varchar(200) primary key,
	block_size int not null default 0
);
create table RSA_KEY(
	publicKey varchar(400),
	privateKey varchar(1650)
);
insert into RSA_KEY values("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");


use user2;
create table BlockChain(
	f_name varchar(200) primary key,
	block_size int not null default 0
);
create table RSA_KEY(
	publicKey varchar(400),
	privateKey varchar(1650)
);
insert into RSA_KEY values("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");


GRANT select ON user2.BlockChain TO user1@localhost;
GRANT select ON user1.BlockChain TO user2@localhost;
