# file upload/download table

drop table file;
create table file(
	no int auto_increment PRIMARY KEY,
	originalName varchar(200),
	resultName varchar(200) default 0,
	password varchar(200),
	originalFileSize varchar(100),
	resultFileSize varchar(100) default 0,
	fileOption varchar(20)
);


# block chain server

create table USER(
	userID varchar(200) primary key,
	userPW varchar(200) not null,
	publicKey varchar(200)
);
create view VIEW_USER as select userID, publicKey from USER;

create table LOG(
	f_name varchar(200) primary key,
	location varchar(200) not null,
	last_update_time timestamp not null,
	last_read_line int not null default -1
);

create view VIEW_LOG as select f_name from LOG;

create table logfilename(
	no int auto_increment primary key,
	content text not null
);

# block chain user
create table user1_BlockChain(
	f_name varchar(200) primary key,
	block_size int not null default 0
);

create table user1_RSAKey(
	publicKey varchar(200),
	privateKey varchar(200)
);

create table userID_log(
	no int not null default 0,
	sign varchar(300) not null,
	content  text not null,
	state varchar(10)
);




insert into center.user(userID, userPW) values("user1", "admin1");
insert into center.user(userID, userPW) values("user2", "admin2");

CREATE USER user1@localhost identified by 'admin1';
CREATE USER user2@localhost identified by 'admin2';

CREATE DATABASE user1;
CREATE DATABASE user2;

GRANT select ON center.VIEW_LOG TO user1@localhost;
GRANT select ON center.VIEW_LOG TO user2@localhost;
GRANT select ON center.VIEW_USER TO user1@localhost;
GRANT select ON center.VIEW_USER TO user2@localhost;

use user1;
create table user1_BlockChain(
	f_name varchar(200) primary key,
	block_size int not null default 0
);
create table user1_RSAKey(
	publicKey varchar(200),
	privateKey varchar(200)
);

use user2;
create table user2_BlockChain(
	f_name varchar(200) primary key,
	block_size int not null default 0
);
create table user2_RSAKey(
	publicKey varchar(200),
	privateKey varchar(200)
);